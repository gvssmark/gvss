


<!DOCTYPE html>
<html>

<head>
 <script src="index.js" defer></script>
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#000000" />
    <link rel="apple-touch-icon" href="ibap512.png">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Poppins&effect=neon|outline|emboss|shadow-multiple">

    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="theme-color" content="#000000" />
    <title>IBAP RETIREES GOOGLE GROUP</title>
    <style>
    * {box-sizing:border-box; }
    .fixed td{height:100px; width:130px; text-align:center }
.bdiv{width:360px; overflow-x:scroll;}
.bdiv::-webkit-scrollbar {
  display: none;}
table.fixed {table-layout: fixed; width:360px;}

.pname {font-family: "Poppins", sans-serif; text-shadow: 3px 3px 3px #ababab;   font-size:25px; }
body {overscroll-behavior: contain; margin: auto;background: rgba(231, 226, 228, 0.8);width: 360px;height: 100%; background-image: url('https://github.com/gvssmark/gvss/blob/main/images/smaillibap.png?raw=true');}
.ham {  width: 35px;  height: 5px;  background-color: black;  margin: 6px 0;}

.container {width: 360px;height: 100%;background: rgba(231, 226, 228, 0.8)}
.header {width: 360px;height: 60px;top: 0;position: fixed;background: yellow}
.heading {text-align: center;color: black;font-size: 16px;margin-top: 20px;text-decoration: none;}
#loginTable {border-collapse: collapse;margin-top: 1px;width: 250px;margin-left: 55px;font-size: 50px;text-align: center;background: #008B8B;color: white;border-radius: 25px;box-shadow: 0 8px 8px 0 rgba(0, 0, 0, 0.4);}
.tdgo {background: #008B8B;text-aling: center;font-size: 40px;color: cyan;border: none;}
#buttonsDiv {margin-top: 50px;display: none;padding: 15px; }
.btns {width: 300px;margin: auto;height: 40px;text-align: center;font-size: 16px; color: black;box-shadow: 0 8px 8px 0 rgba(0, 0, 0, 0.4);border-radius: 25px; line-height: 40px; }
.btn1 {background: rgba(255, 99, 64, 0.3)}
.btn2 {background: rgba(177, 13, 120, 0.2)}
.btn3 {background: rgba(0, 119, 181, 0.2)}
.btn4 {background: rgba(110, 187, 0, 0.2)}
.btn5 {background: rgba(255, 255, 1, 0.2)}
.btn6 {background: rgba(255, 0, 145, 0.2)}
.btn7 {background: rgba(0, 255, 5, 0.2)}
.btn8 {background: rgba(205, 255, 1, 0.2)}
p {padding: 8px;}
#display1 {margin-top: 10px;margin-left: 5px; ; }
#display2 {margin-top: 80px;margin-left: 5px;}
#homeDiv {width: 55px;height: 55px;margin-left: 303px;padding: 0px;margin-top: 5px;z-index: 2;background: none;position: fixed;color: white;text-align: center;display: none;top: 5px;font-weight: bold;}
#middleDiv {z-index: 2;width: 25px;height: 25px;border-radius: 50px;margin-left: 325px;padding: 0px;margin-top: 500px;z-index: 9;background: red;position: fixed;color: white;text-align: center;display: none;top: 5px;font-size: large;box-shadow: 0 8px 8px 0 rgba(0, 0, 0, 0.3);}
#middleDivMenu {color: red;display: none;background: yellow;width: 355px;margin-left: -322px;margin-top: 6px;opacity: 1.0;bottom: 0px;box-shadow: 0 8px 8px 0 rgba(0, 0, 0, 0.3);}
table {border-collapse: collapse;margin: auto;width: 95%;}
h4 {color: blue;text-align: center;text-decoration: none;}
.abt {color: red;text-decoration: underline;}
#mobileTable {margin-top: 5px;font-size: x-small;border-collapse: collapse;border: 1px solid black;}
thead{border:0px solid red; background-color: red;position: fixed;z-index: 10;margin-top: -30px; color: white; }
.logintr {height: 75px;}
.logintd {width: 75px;}
#collectedSR {color: black;background: white;width: 200px;margin-left: 70px;margin-bottom: 5px;border-radius: 15px;text-align: center;margin-top: 80px;}
.caution {text-align: center;margin: 5px;margin-top: 1px; font-size:small;}
#notAmember {display: none;font-size: large;margin: auto;text-align: center;}
.modal {display: none;position: fixed;z-index: 10;padding-top: 1px;left: inherit;top: 0;width: 360px;height: 100%;overflow: auto;background-color: rgb(0, 0, 0);background-color: rgba(0, 0, 0, 0.4);}
.modal-content {background-color: #ffe7c0;margin: auto;padding: 2px;padding-bottom: 2px;border: 1px solid #888;width: 95%;border-radius: 15px;}
.close {color: #fd0b20;float: right;font-size: 28px;font-weight: bold;}
#nameHeader{text-align: center; font-size:large; margin-top:10px; color:white}
table.bio{font-size:small;  border-left:0px; border-right:0px; padding:0px;}
b{color:white; }
.b1{color:red; }
#modalData{padding:0px;}
#myInputSearch {margin-top: 50px;width: 180px;margin-left: 90px;;height: 30px;border-radius: 15px;background-color: cyan;border: 0px;outline: 0;display:none;position:fixed;}
#myInputCity {margin-top: 50px;width: 180px;margin-left: 90px;;height: 30px;border-radius: 15px;background-color: cyan;border: 0px;outline: 0;display:none;position:fixed;}
#myInputBrWorked {margin-top: 50px;width: 180px;margin-left: 90px;;height: 30px;border-radius: 15px;background-color: cyan;border: 0px;outline: 0;display:none;position:fixed;}
#myInputData {margin-top: 50px;width: 180px;margin-left: 90px;;height: 30px;border-radius: 15px;background-color: cyan;border: 0px;outline: 0;display:none;position:fixed;}
#about{font-size:small}
a{text-decoration:none;}  
#tdgo{color:#008B8B}
.hdivs {padding-top:10px; margin-left: 5px;}
a {text-decoration:none; color:black; visited:white;}
#ifr {width:350px; height:600px; border:none; display:none}
#loc{height:260px; margin: 100px auto; width:350px; border-radius:25px; text-align:center; display:none; background:LightGray;  box-shadow: 0 8px 8px 0 rgba(0, 0, 0, 0.4)  }
#gotoabk {display:none}

    </style>
</head>

<body>

<div id='loc'>
<p class='pname'>Welcome</p>
<p id='locname' class='pname'></p>
<p id='loctime' ></p>

<div >Wait... Loading....</div>


</div>

    <input type="text"  onkeyup="dispdata();"  id='myInputSearch'  placeholder="Search for a Name here...">
    <input type="text"  onkeyup="seachPlaceOfStay();"  id='myInputCity'  placeholder="Search for a City here...">
    <input type="text"  onkeyup="branchesListSeacrh();"  id='myInputBrWorked'  placeholder="Search for a Branch here...">
    <input type="text"  onkeyup="mobileTablemyFunction();"  id='myInputData'  placeholder="Search for any value...">


    <div class='container'>
   
   <div onclick='hamdivhide()'id='hamdiv' style=' width:180px; position:fixed; margin-left:180px; padding:5px 0; margin-top:50px; z-index:0; background:grey; color:white; display:none; '>
   <div onclick="btn1Click()" class='hdivs'>Search by Name</div>
   <div onclick="btn2Click()"  class='hdivs'>Events this Week</div>
   <div onclick="btn3Click()"  class='hdivs'>Members Live in</div>
   <div onclick="btn4Click()"  class='hdivs'>Branches Worked</div>
   <div onclick="btn5Click()"   class='hdivs'>All Data</div>
   
     
   <div onclick="btn6Click()"  class='hdivs'>Data Correction</div>
   <div onclick='showwelf()'  class='hdivs'>Welfare</div>
   <div onclick="btn8Click()"  class='hdivs'>About</div>
    </div>
   
        <div class='header'> <h4 class='heading'>IBAP Retirees' Google Group</h4></div>

        <div class='login' id="login">
            <p id='collectedSR'>SR No</p>
            <table border=0 id='loginTable'>
                <tr class='logintr'>
                    <td class='logintd' onclick="getCelValue(1)">1
                    <td class='logintd' onclick="getCelValue(2)">2
                    <td class='logintd' onclick="getCelValue(3)">3
                <tr class='logintr'>
                    <td onclick="getCelValue(4)">4
                    <td onclick="getCelValue(5)">5
                    <td onclick="getCelValue(6)">6
                <tr class='logintr'>
                    <td onclick="getCelValue(7)">7
                    <td onclick="getCelValue(8)">8
                    <td onclick="getCelValue(9)">9
                <tr class='logintr'>
                    <td onclick="deleteChar()" class='small'>x
                    <td onclick="getCelValue(0)">0
                    <td  id='tdgo' onclick="verifyLogin()">Go
            </table>
            
        
        <p class='caution'>This application behaves like a native app.<br /><b  class='b1'>Back Button</b> will always <b  class='b1'>EXIT</b> from the app.<br /> Use Menus provided in the app to navigate.</p>
        <p  id='notAmember'><b class='b1'>You are not a Member<br>
        <a href='https://docs.google.com/forms/d/e/1FAIpQLSeBrp4C8dL5uSj3HmE8r9bBpgwTGcuzzPAyce7Y1BDotK2jVw/viewform?usp=sf_link'>Submit Your Data</a></b></p>
        </div>

        <div id='buttonsDiv'><br>
            <div onclick="btn1Click()"  id="btn1" class="btns btn1">Search By Name</div><br>
            <div onclick="btn2Click()" id="btn2" class="btns btn2">Events This Week</div><br>
            <div onclick="btn3Click()" id="btn3" class="btns btn3">Members Living in</div><br>
            <div onclick="btn4Click()" id="btn4" class="btns btn4">Who Worked in This Branch</div><br>
            <div onclick="btn5Click()" id="btn5" class="btns btn5">SR No / Name / Place / Mobile No</div><br>
            <div onclick="btn6Click()" id="btn6" class="btns btn6">Data Correction</div><br>
            <div onclick='showwelf()' id="btn7" class="btns btn7">Welfare</div><br>
            <div onclick="btn8Click()" id="btn8" class="btns btn8">About</div>
        </div>

        <div id='display1'></div>
        <div id='display2'></div>

        <div id="homeDiv" onclick="showHome()">
        <div class='ham'></div>
<div class='ham'></div>
<div class='ham'></div>

        </div>

        <div onclick="quickMenuClick()" id="middleDiv">Q
            <div id='middleDivMenu'>
                <table>
                    <tr>
                        <td><span onclick="btn1Click()">Search</span>
                        <td><span onclick="btn2Click()">Events</span>
                        <td><span onclick="btn3Click()">Cities</span>
                        <td><span onclick="btn4Click()">Branches</span>
                        <td><span onclick="btn5Click()">Data</span>
                </table>
            </div>
        </div>

    </div> 

    <div id="myModal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h4  id="nameHeader">Sudhakar Babu</h4>
            <p id="modalData"></p>
        </div>
    </div>

<iframe id='ifr' src="https://gvssmark.github.io/gvss/otherfeatures.html"  title="Iframe Example"></iframe>

    <script>
 

localStorage.getItem("mylocal") !== null? ( document.getElementById("loc").style.display = "block",               document.getElementById("login").style.display = "none",
l=localStorage.getItem("mylocal").split("#"),
document.getElementById('locname').innerHTML=l[1],
document.getElementById('loctime').innerHTML="Last log in on this device: " + l[2],
localStorage.setItem("mylocal",l[0]+"#"+l[1]+"#"+Date().toString().substring(4,21)
)) :
    document.getElementById("login").style.display = "block"
    
 // comment the above and uncomment below   for live
//localStorage.getItem("mylocal") !== null? ( document.getElementById("loc").style.display = "block",               document.getElementById("login").style.display = "none",
//l=localStorage.getItem("mylocal").split("#"),
//document.getElementById('locname').innerHTML=l[1],
//document.getElementById('loctime').innerHTML="Last log in on this device: " + l[2],
//localStorage.setItem("mylocal",l[0]+"#"+l[1]+"#"+Date().toString().substring(4,21),
//writeToLog(l[0] ,l[1]))) :
  //  document.getElementById("login").style.display = "block"
    


function gotoaddbook(){
document.getElementById('loc').style.display='none'
document.getElementById('buttonsDiv').style.display='block'
}


        var about = "";
        alphasorted = [];
        var dataCorrection =
        cd = new Date()
        fd = new Date();
        monthsArray = ["", "Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"]
        fd.setDate(fd.getDate() + 7);
        currMonth = cd.getMonth() + 1
        currDate = cd.getDate()
        futureMonth = fd.getMonth() + 1
        futureDate = fd.getDate()
        url = 'https://script.google.com/macros/s/AKfycbwU43y7aw-hY8rjx77YgViB5Vs2H5yv7i5GMuUUfB6YMLbEQn3D/exec'

        async function getMyData() {
            response = await fetch(url)
            data = await response.json()
            tempData = data["user"].sort((a, b) => a.srno - b.srno);
            alphasorted = tempData.sort(function (a, b) { return a.name.localeCompare(b.name) })
            mycities = Array.from(new Set(alphasorted.map(s => s.add3))).sort()
            if (tempData.length>0){document.getElementById('tdgo').style.color="yellow";
            //document.getElementById('gotoabk').style.display='block';
				  gotoaddbook()}
            getVariousArrays()


}

        getMyData()


    

function hamdivhide(){
document.getElementById('hamdiv').style.display='none'
          //document.getElementById("buttonsDiv").style.display = "none"
          
}

        function verifyLogin() {
            //sr =30349 //comment this when live
            logsrno = +sr;
            logindata = tempData.filter(a => a.srno === logsrno * 1)
            if (logindata.length > 0) {
                document.getElementById("buttonsDiv").style.display = "block";
                document.getElementById("login").style.display = "none";
     localStorage.setItem("mylocal", logindata[0].srno + "#" + logindata[0].name + "#" + Date().toString().substring(4,21) )
               // writeToLog(logindata[0].srno, logindata[0].name) //remove comments when live
            }
            else {
                document.getElementById("notAmember").style.display = "block";
                document.getElementById("buttonsDiv").style.display = "none";
            }
        }

		function writeToLog(a,b){
            formData = new FormData();
            formData.append('fname', a);
            formData.append('lname', b );
            fetch("https://script.google.com/macros/s/AKfycbyfHambsSuB4tIQiUIIqIf72m7zgl7hT4FsW8N3TIVeQu9U6Po/exec",
                {
                body: formData,
                method: "post"
                });
		}

function welf(){

}

        function createCityTable() {
            cityTable = "<br><br><br><br><h4 align=center> Members Living in </h4><table id='citiesTable' width=340px border=1 align=center>"
            mycities.forEach(function(item,index) { cityTable += "<tr><td class='pname' ><span onclick='onCityClick(this.id)'id='" + index + "'>" + item + "</span></td></tr>" })
            cityTable = cityTable + '</table><br><br><br>'
        }

        function onCityClick(id) {
            selectedCity = mycities[id]
            livesin = alphasorted.filter(a => a.add3.toLowerCase()
                .includes(selectedCity.trim().toLowerCase()))
                .map(a => [a.srno, a.name, a.add3, a.pin])
            cityPinsArray = Array.from(new Set(livesin.map(s => s[3]))).sort()
            citytable = "<h4 align=center>Members Living in " + selectedCity + "</h4>"
            for (i = 0; i < cityPinsArray.length; i++) {
                thisPin = cityPinsArray[i]
                tempcity = livesin.filter(a => a[3] === thisPin)
                citytable += "<b  style='color:blue'> PIN- " + thisPin + "</b>(" + tempcity.length + ")<br>"
                tempcity.forEach(function (a) { citytable += "<span class='pname' onClick='nameclick(this.id)' id=" + a[0] + ">" + a[1] + "</span><br>" })
                citytable += "<hr><br>"
            }
            document.getElementById("display2").style.display = "block"
            document.getElementById("display1").style.display = "none"
            document.getElementById("myInputCity").style.display = "none"
            document.getElementById("display2").innerHTML = citytable
            window.scrollTo(0,0)

        }

        function getVariousArrays() {
            srnoSort = alphasorted.map(a => ({ srno: a.srno, name: a.name, add3: a.add3, mob1: a.mob1 })).sort((a, b) => a.srno - b.srno)
            nameSort = alphasorted.map(a => ({ srno: a.srno, name: a.name, add3: a.add3, mob1: a.mob1 })).sort(function (a, b) { return a.name.localeCompare(b.name) })
            mobileSort = alphasorted.map(a => ({ srno: a.srno, name: a.name, add3: a.add3, mob1: a.mob1 })).sort((a, b) => a.mob1 - b.mob1)
            placeSort = alphasorted.map(a => ({ srno: a.srno, name: a.name, add3: a.add3, mob1: a.mob1 })).sort(function (a, b) { return a.add3.localeCompare(b.add3) })
            bdays = alphasorted.map(a => ({ srno: a.srno, name: a.name, bm: a.bm, bd: a.bd, photo: a.photoid }))
            mdays = alphasorted.map(a => ({ srno: a.srno, name: a.name, mm: a.mm, md: a.md, photo: a.photoid }))

            //Birthdays this week:
            //bd1 = bdays.filter(a => a.bm === currMonth).filter(a => a.bd >= currDate).filter(a => a.bd <= futureDate).sort((a, b) => a.bd - b.bd)
            currMonth === futureMonth?
            bd1 = bdays.filter(a => a.bm === currMonth).filter(a => a.bd >= currDate).filter(a => a.bd <= futureDate).sort((a, b) => a.bd - b.bd):
            bd1 = bdays.filter(a => a.bm === currMonth).filter(a => a.bd >= currDate).sort((a, b) => a.bd - b.bd)
            bd2 = [];
            if (currMonth != futureMonth) {
                bd2 = bdays.filter(a => a.bm === futureMonth).filter(a => a.bd <= futureDate).sort((a, b) => a.bd - b.bd)
            }

            currMonth === futureMonth?
            md1 = mdays.filter(a => a.mm === currMonth).filter(a => a.md >= currDate).filter(a => a.md <= futureDate).sort((a, b) => a.md - b.md):
            md1 = mdays.filter(a => a.mm === currMonth).filter(a => a.md >= currDate).sort((a, b) => a.md - b.md)
            md2 = [];
            if (currMonth != futureMonth) {
                md2 = mdays.filter(a => a.mm === futureMonth).filter(a => a.md <= futureDate).sort((a, b) => a.md - b.md)
            }
           allbd = [...bd1, ...bd2]
 allmd = [...md1, ...md2]

            
        }

        function brworked_table_create() {
            allbr = alphasorted.map(a => a.newbrlist)
            uniqueArray = unq(allbr.flat(1).join().split(",").map((item) => item.trim()).sort())
            brworked_table_text = "<br><br><br><br><br><h4> Who worked in This Branch </h4><table border=1 id='id_brWorked'>"
            for (i = 1; i < uniqueArray.length; i++) { brworked_table_text += "<tr><td><span class='pname'  onclick=' getIdFromAllBranchTable(this.id)' id='" + i + "'>" + uniqueArray[i] + "</span></td></tr>" }
            brworked_table_text += "</table><br><br>"
        }

       function getIdFromAllBranchTable(id) {
            brselected = uniqueArray[id]
            tempBrlist = alphasorted.map(a => ({ srno: a.srno, name: a.name, brlist: a.newbrlist }))
            workedlist = "<h4 align=center> Members Worked In " + brselected + "</h4><table border=1>"
            tbrlist = alphasorted.map(a => ({ srno: a.srno, name: a.name, brlist: unq(a.newbrlist.split(","))})).filter(a => a.brlist.indexOf(brselected)>=0)

            tbrlist.forEach(function (a) { workedlist += "<tr><td> <span  class='pname'  onClick='nameclick(this.id)' id=" + a.srno + ">" + a.name + "</span>" })
            workedlist += "</table>"
            document.getElementById("display2").style.display = "block"
            document.getElementById("display1").style.display = "none"
            document.getElementById("myInputBrWorked").style.display = "none"
            document.getElementById("display2").innerHTML = workedlist += "</table><br><br><br>"
        }

        function eventsThisWeek_create() {
        

         bdtablenew()
           bdtable = "<br><br><br>" +  bdttabletext + mdttabletext
            
            
            
        }


function bdtablenew(){
bdttabletext = `<br><h4>Eventes This Week: Birthdays:</h4> <div class='bdiv'><table border=0 class='fixed'><tr>`
bdt1=''
allbd.forEach(function (a) {bdt1 += `<td><span onClick='nameclick(this.id)' id= ${a.srno} > <img  src='https://drive.google.com/uc?export=view&id=${a.photo}' border=0 align='center' alt='Smiley face' width='100' height='150'  style='border-radius:10px;'><br>${monthsArray[a.bm]}-${a.bd}</span>`})
bdttabletext +=bdt1 + `</table></div>`

mdttabletext = `<br><h4>Eventes This Week: Marriagedays: </h4><div class='bdiv'><table border=0 class='fixed'><tr>`
mdt1=''
allmd.forEach(function (a) {mdt1 += `<td><span onClick='nameclick(this.id)' id= ${a.srno} > <img  src='https://drive.google.com/uc?export=view&id=${a.photo}' border=0 align='center' alt='Smiley face' width='100' height='150'  style='border-radius:10px;'><br>${monthsArray[a.mm]}-${a.md}</span> `})
mdttabletext +=mdt1 + `</table></div>`

}



        function unq(a) { return Array.from(new Set(a)); }

        function quickMenuClick() {
            getDisplayStatus = document.getElementById("middleDivMenu")
            if (getDisplayStatus.style.display === "none") {
              //  getDisplayStatus.style.display = "block";
            } else {
                getDisplayStatus.style.display = "none";
            }
        }


        
        
        function hideInputs(){
            document.getElementById("myInputSearch").style.display = "none"
            document.getElementById("myInputCity").style.display = "none"
            document.getElementById("myInputBrWorked").style.display = "none"
            document.getElementById("myInputData").style.display = "none"
            
            document.getElementById("myInputSearch").value = ""
            document.getElementById("myInputCity").value = ""
            document.getElementById("myInputBrWorked").value = ""
            document.getElementById("myInputData").value = ""

            document.getElementById("buttonsDiv").style.display = "none"
            //document.getElementById("middleDiv").style.display = "block"
            document.getElementById("homeDiv").style.display = "block"
            document.getElementById("display2").innerHTML = ""    
            document.getElementById("display2").style.display = "none"
            document.getElementById('ifr').style.display='none'

        }
                
        function btn1Click() {
            hideInputs()
            document.getElementById("myInputSearch").style.display = "block"
            document.getElementById("display1").style.display = "block"      
            document.getElementById("display1").innerHTML = ""      
        }
        
        function btn2Click() {
            hideInputs()
            eventsThisWeek_create()
            document.getElementById("display1").innerHTML = bdtable
            document.getElementById("display1").style.display = "block"
        }

        function btn3Click() {
            hideInputs()
            createCityTable()
            document.getElementById("display1").innerHTML = cityTable
            document.getElementById("display1").style.display = "block"
            document.getElementById("myInputCity").style.display = "block"
        }

        function btn4Click() {
            hideInputs()
            brworked_table_create()
            document.getElementById("display1").innerHTML = brworked_table_text
            document.getElementById("display1").style.display = "block"
            document.getElementById("myInputBrWorked").style.display = "block"
        }
        rawTable1 = `<br><br><br><br><h4>Click on Table Heading for sorting</h4><br><table id='mobileTable' border=1 align=center><thead ><th style='height:25px; width:24px; '  onclick='getThSort(srnoSort)' >SR<th style='width:159px;' onclick='getThSort(nameSort)' >Name<th style='width:85px;' onclick='getThSort(placeSort)' >Place<th style='width:55px;' onclick='getThSort(mobileSort)' >Mobile</thead>`
        xx = ""
        function btn5Click() {
            hideInputs()
            document.getElementById("display1").innerHTML = ""
            
            //nameSort.forEach(function (a) { xx += "<tr><td>" + a.srno + "<td> <span onClick='nameclick(this.id)' id=" + a.srno + ">" + a.name + " </span><td>" + a.add3 + "<td>" + a.mob1 })

nameSort.forEach(function (a) { xx += `<tr align=center onClick='nameclick(this.id)' id='${a.srno}' ><td><span class='pname'> ${a.name}</span> <br> SR No: ${a.srno} / Place: ${a.add3} / Mobile :${a.mob1}`})

            
            rawTable = rawTable1+xx + "</table><br><br>"
            document.getElementById("display1").innerHTML = rawTable
            document.getElementById("display1").style.display = "block"
            xx=""
            document.getElementById("myInputData").style.display = "block"
        }


 
        function getThSort(whatSort) {
            hideInputs()
            document.getElementById("display1").innerHTML = ""

//whatSort.forEach(function (a) { xx += "<tr><td>" + a.srno + "<td> <span onClick='nameclick(this.id)' id=" + a.srno + ">" + a.name + " </span><td>" + a.add3 + "<td>" + a.mob1 })

whatSort.forEach(function (a) { xx += `<tr align=center onClick='nameclick(this.id)' id='${a.srno}' ><td><span class='pname'> ${a.name}</span> <br> SR No: ${a.srno} / Place: ${a.add3} / Mobile :${a.mob1}`})


            rawTable =rawTable1+ xx + "</table><br><br>"
            document.getElementById("display1").innerHTML = rawTable
            document.getElementById("display1").style.display = "block"
            xx=""
            document.getElementById("myInputData").style.display = "block"
        }

        function btn8Click() {
            hideInputs()
            aboutData()
            document.getElementById("display1").innerHTML = about
            document.getElementById("display1").style.display = "block"
        }
        function btn6Click() {
            hideInputs()
            dataCorrectionData()
            document.getElementById("display1").innerHTML = dataCorrection
            document.getElementById("display1").style.display = "block"
        }

        function nameclick(membsrno) {
            srnoForDisplay = membsrno
            x = alphasorted.filter(a => a.srno === +srnoForDisplay)
            mydata = x[0]
            document.getElementById("myModal").style.display = "block"
            document.getElementById("nameHeader").innerHTML = mydata.name

            dt = new Date(mydata.retdate)
            ddmmyyyy = dt.getDate()+'-'+monthsArray[dt.getMonth()+1]+'-'+dt.getFullYear()
            trtd="<tr><td colspan=2 >"; btext="<b>Birthday:</b>"; mtext="<b>Wedding Anniversary:</b>"
            bm= mydata.bm?mydata.bm:0; mm= mydata.mm?mydata.mm:0; bd= mydata.bd; md= mydata.md;
            ev=(bm && mm)?`${trtd}${btext} ${monthsArray[bm]},${bd} , ${mtext}${monthsArray[mm]},${md}`:bm>0?`${trtd}${btext}${monthsArray[bm]},${bd}`:mm>0 ? `${trtd} ${mtext} ${monthsArray[mm]}, ${md}`:"" ;
            mob1 =mydata.mob1>0? `${mydata.mob1}`:""
            mob2 =mydata.mob2>0? `${mydata.mob2}`:""
            fix = mydata.fix.length>0? `${mydata.fix}`:""
            em=mydata.email.length>0?`${trtd}<b>Email: </b><a href = 'mailto:${mydata.email}'><mark>${mydata.email}</mark>`:""
            tab=`
            <table class='bio' width=100% border=0>
            <tr><td><b>Address: </b><br>${mydata.add1}<br>${mydata.add2}<br>${mydata.add3}-${mydata.pin} <br>${mydata.add4}<td width=75><img  src='https://drive.google.com/uc?export=view&id=${mydata.photoid}' border=0 align='center' alt='Smiley face' width='75' height='100'  style='border-radius:10px;'> 
            ${trtd}<b>Phones: </b>
                <a href='tel:${mob1}'><mark style='text-decoration: none;line-height: 1.6 ' > ${ mob1 }</mark></a>&nbsp;
                <a href='tel:${mob2}'><mark style='text-decoration: none;line-height: 1.6 ' > ${ mob2 }</mark></a>&nbsp;
                <a href='tel:${fix}'><mark style='text-decoration: none;line-height: 1.6 ' >   ${ fix  }</mark></a>
            ${em}
            ${ev} 
            ${trtd}<b>Pension Branch:</b >${mydata.penbr}   
            ${trtd}<b>Retired on :</b >${ddmmyyyy} <br> <b>Retired at :</b> ${mydata.lastbr}  
            ${trtd}<b>Branches Worked:</b >${mydata.brlist}   
            </table>

            `
            
            //modal data background : https://ibap.w3spaces.com/modaldatabg.jpg?bypass-cache=1626531331 or https://ibap.w3spaces.com/modaldatabg.jpg
            document.getElementById("modalData").innerHTML = tab
            clr=`hsla(${Math.floor(Math.random() * 360)}, 90%,40%,1)`
            document.getElementById("modalData").style.backgroundColor=clr
            document.getElementById("modalData").style.color='white'
            document.getElementsByClassName("modal-content")[0].style.backgroundColor=clr
            
            
        }

        function showHome() {
            document.getElementById("homeDiv").style.display = "none"
            document.getElementById("display1").style.display = "none"
            document.getElementById("display2").style.display = "none"
            document.getElementById("buttonsDiv").style.display = "none"
            document.getElementById("middleDiv").style.display = "none"
            document.getElementById("myInputSearch").style.display = "none"
            document.getElementById("myInputCity").style.display = "none"
            document.getElementById("myInputBrWorked").style.display = "none"
            document.getElementById("myInputData").style.display = "none"
            document.getElementById('hamdiv').style.display='block'
         // document.getElementById("display1").innerHTML = "<br><br><br> <img src='https://github.com/gvssmark/gvss/blob/main/images/ibap512.png?raw=true' width=215 height=200>"
        // document.getElementById("display1").style.display = "block"
document.getElementById('ifr').style.display='none'

        }

        function dataCorrectionData() {
          //  document.getElementById("middleDiv").style.display = "block"
            dataCorrection = `<br><br><br><br>For Data updation please send a WhatsApp Message/ Email to the following persons<br><br><b class='b1'>VM Seshasayan:</b> <br>Mobile: 9849750184 <br>Email: seshasayan.vm@gmail.com<br><br><b class='b1'>GVSS Markandeyulu: </b><br>Mobile: 9989036183<br> Email: gvssmark@gmail.com<br><br> <b class='b1'> Please Allow 1 or 2 days for updating the data..</b> <br><br><br><br>
         <span onclick='clearlocal()'>   Clear Local Storage</span>
            
        `
        }


function clearlocal(){
localStorage.removeItem("mylocal");


}


function aboutData() {
          //  document.getElementById("middleDiv").style.display = "block"
            about = `<span id='about'><br><br><br><br><b1>IBAP-Retirees Google Group</b1> was started with an intention, to have a common platform, to  discuss about Retirees Issues and for exchanges of thoughts of common interest, among the retirees of Indian Bank  of AP &  Telangana States. This group is not affiliated to any Association. No membership fees to join this group. Presently, we have <b><span class='abt'>  ${alphasorted.length} </span> </b>members in this group.<br><br> <b1>Address Book</b1> Later we thought, it will be convenient to have an address book of Indian Bank Retirees of Telangana and Andhra Pradesh, with Photos. So we have designed a format to have the details of the retirees and upto now <b><span class='abt'>  ${alphasorted.length} </span> </b> retired staff members irrespective of their designation in the Bank and irrespective of their affiliation to the associations gave their details.<br><br>  <b1>IB Friends WhatsApp group</b1> Subsequently, we have started IB Friends WhatsApp group for the convenience of Smart Phone mobile users. Presently there are 201 participants in this group.<br><br> All the three groups are separate. Retired staff members can choose any one , or two or all the three groups This is purely optional. <br><br> Once again, we wish to inform you that <mark>these three groups are not a part of any association nor against any association</mark>. These are purely for inter communication among the Retired Staff members of Indian Bank.<br></span> `
        }
        sr = ""
        function getCelValue(a) {
            sr += a
            document.getElementById('collectedSR').innerHTML = sr
        }

        
        function deleteChar() {
            document.getElementById("notAmember").style.display = "none";
            l = sr.length
            sr = sr.substring(0, l - 1)
            document.getElementById('collectedSR').innerHTML = sr
            srnolength = document.getElementById('collectedSR').innerHTML.length
            if (srnolength == 0) { document.getElementById('collectedSR').innerHTML = "SR No" }
        }

        
        var modal = document.getElementById("myModal");
        var span = document.getElementsByClassName("close")[0];
        
        span.onclick = function () {
            modal.style.display = "none";
        }
        window.onclick = function (event) {
            if (event.target == modal) {
                modal.style.display = "none";
            }
        }

        function seachPlaceOfStay() {
            inputbox = document.getElementById("myInputCity");
            tableid = document.getElementById("citiesTable");
            column = 0
            searchAnyTable(inputbox, tableid, column)
        }
        function branchesListSeacrh() {
            input = document.getElementById("myInputBrWorked");
            table = document.getElementById("id_brWorked");
            column = 0
            searchAnyTable(input, table, column)
        }
        
       
        function dispdata() { // take input from input box and display names containing the text
            let filter=document.getElementById("myInputSearch").value.toLowerCase()
            if (filter.length <= 4) { document.getElementById("display1").innerHTML = "" }
            if (filter.length >= 3) {
                toTable =  alphasorted.filter(a => a.name.split(" ").join("").toLowerCase().includes(filter.toLowerCase())).map(a => [a.srno, a.name]);
                tablebody = ""
                toTable.forEach(function (a) { tablebody += "<span  class='pname' onClick='nameclick(this.id)' id=" + a[0] + ">" + a[1] + "</span><br>" })
                document.getElementById("display1").innerHTML = "<br><br><br><br><br><br>" + tablebody + "<br><br><br>"
            }
        }

  
        function mobileTablemyFunction() {
            const input = document.getElementById("myInputData");
            const inputStr = input.value.toUpperCase();
            document.querySelectorAll('#mobileTable tr:not(.header)').forEach((tr) => {
                const anyMatch = [...tr.children]
                    .some(td => td.textContent.toUpperCase().includes(inputStr));
                if (anyMatch) tr.style.removeProperty('display');
                else tr.style.display = 'none';
            });
        }


        function searchAnyTable(input, table, column) {
            var input, filter, table, tr, td, i, txtValue;
            filter = input.value.toUpperCase();
            tr = table.getElementsByTagName("tr");
            for (i = 0; i < tr.length; i++) {
                td = tr[i].getElementsByTagName("td")[column];
                if (td) {
                    txtValue = td.textContent || td.innerText;
                    if (txtValue.toUpperCase().indexOf(filter) > -1) {
                        tr[i].style.display = "";
                    } else {
                        tr[i].style.display = "none";
                    }
                }
            }
        }


function showwelf(){
document.getElementById("buttonsDiv").style.display = "none"
document.getElementById('ifr').style.display='block'
document.getElementById("homeDiv").style.display = "block"

}

    </script>
</body>

</html>
